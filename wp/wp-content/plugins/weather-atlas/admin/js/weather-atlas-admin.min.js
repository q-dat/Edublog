document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#city_name"),t=document.querySelector("#clearInput"),n=e.closest(".autocomplete-container"),o=document.createElement("div");o.className="autocomplete-dropdown",n.appendChild(o),e.addEventListener("input",(function(){this.value.length>0?t.style.display="block":t.style.display="none";const n=this.value;if(n.length<3)return o.style.display="none",void e.classList.remove("loading");e.classList.add("loading"),fetch("https://www.weather-atlas.com/weather/includes/autocomplete_city.php?limit=20&term="+encodeURIComponent(n)).then((e=>e.json())).then((t=>{o.innerHTML="",t.results.forEach((t=>{const n=document.createElement("div");n.textContent=t.city_name,n.addEventListener("click",(function(){e.value=t.city_name,document.querySelector("#city_selector").value=t.city_selector,o.style.display="none"})),o.appendChild(n)})),o.style.display="block",e.classList.remove("loading")})).catch((t=>{console.error("Error:",t),e.classList.remove("loading")}))})),t.addEventListener("click",(function(){e.value="",o.style.display="none"})),0===e.value.length&&(t.style.display="none"),document.addEventListener("click",(function(t){e.contains(t.target)||o.contains(t.target)||(o.style.display="none")}));document.querySelector("#copyCityName").addEventListener("click",(function(){const e=document.querySelector("#city_name"),t=document.querySelector("#widget_name");e&&t&&(t.value=e.value)}))}));